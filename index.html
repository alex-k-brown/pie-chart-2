<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" type="text/css" href="style.css">
        <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
    </head>
    <body>
    <div id="content">
        <div class="chart-container">
            <div id="donutchart"></div>
        </div>
        <ul class="form">
            <form name="toolForm">
                <li class="li-1">
                    <div class="li-title">
                        <h2>Phone</h2>
                    </div>
                    <div class="tool">
                        <input type="text" name="name" id="name-1">
                    </div><!--tool-->
                    <div class="weight">
                        <h3>Weight:</h3>
                        <input type="number" name="number-1" id="number-1" class="number">
                    </div><!--weight-->
                </li>
                <li>
                    <div class="li-title">
                        <h2>Email</h2>
                    </div>
                    <div class="tool">
                        <input type="text" name="name" id="name-2">
                    </div><!--tool-->
                    <div class="weight">
                        <h3>Weight:</h3>
                        <input type="number" name="number-2" id="number-2" class="number">
                    </div><!--weight-->
                </li>
                <li class="li-1">
                    <div class="li-title">
                        <h2>Text/SMS</h2>
                    </div>
                    <div class="tool">
                        <input type="text" name="name" id="name-3">
                    </div><!--tool-->
                    <div class="weight">
                        <h3>Weight:</h3>
                        <input type="number" name="number-3" id="number-3" class="number">
                    </div><!--weight-->
                </li>
                <li>
                    <div class="li-title">
                        <h2>Website</h2>
                    </div>
                    <div class="tool">
                        <input type="text" name="name" id="name-4">
                    </div><!--tool-->
                    <div class="weight">
                        <h3>Weight:</h3>
                        <input type="number" name="number-4" id="number-4" class="number">
                    </div><!--weight-->
                    <div class="button">
                </li>
                <li class="li-1">
                    <div class="li-title">
                        <h2>Applications</h2>
                    </div>
                    <div class="tool">
                        <input type="text" name="name" id="name-5">
                    </div><!--tool-->
                    <div class="weight">
                        <h3>Weight:</h3>
                        <input type="number" name="number-5" id="number-5" class="number">
                    </div><!--weight-->
                </li>
                <li>
                    <div class="li-title">
                        <h2>Contract</h2>
                    </div>
                    <div class="tool">
                        <input type="text" name="name" id="name-6">
                    </div><!--tool-->
                    <div class="weight">
                        <h3>Weight:</h3>
                        <input type="number" name="number-6" id="number-6" class="number">
                    </div><!--weight-->
                </li>
                <li class="li-1">
                    <div class="li-title">
                        <h2>Payments</h2>
                    </div>
                    <div class="tool">
                        <input type="text" name="name" id="name-7">
                    </div><!--tool-->
                    <div class="weight">
                        <h3>Weight:</h3>
                        <input type="number" name="number-7" id="number-7" class="number">
                    </div><!--weight-->
                </li>
                <li>
                    <div class="li-title-double">
                        <h2>Student Ledgers/Online</h2>
                    </div>
                    <div class="tool">
                        <input type="text" name="name" id="name-8">
                    </div><!--tool-->
                    <div class="weight">
                        <h3>Weight:</h3>
                        <input type="number" name="number-8" id="number-8" class="number">
                    </div><!--weight-->
                </li>
                <li class="li-1">
                    <div class="li-title">
                        <h2>Accounts</h2>
                    </div>
                    <div class="tool">
                        <input type="text" name="name" id="name-9">
                    </div><!--tool-->
                    <div class="weight">
                        <h3>Weight:</h3>
                        <input type="number" name="number-9" id="number-9" class="number">
                    </div><!--weight-->
                </li>
                <li>
                    <div class="li-title-double">
                        <h2>Roommate Matching</h2>
                    </div>
                    <div class="tool">
                        <input type="text" name="name" id="name-10">
                    </div><!--tool-->
                    <div class="weight">
                        <h3>Weight:</h3>
                        <input type="number" name="number-10" id="number-10" class="number">
                    </div><!--weight-->
                </li>
                <li class="li-1">
                    <div class="li-title-double">
                        <h2>Room Assignments</h2>
                    </div>
                    <div class="tool">
                        <input type="text" name="name" id="name-11">
                    </div><!--tool-->
                    <div class="weight">
                        <h3>Weight:</h3>
                        <input type="number" name="number-11" id="number-11" class="number">
                    </div><!--weight-->
                </li>
                <li>
                    <div class="li-title">
                        <h2>Maintenance</h2>
                    </div>
                    <div class="tool">
                        <input type="text" name="name" id="name-12">
                    </div><!--tool-->
                    <div class="weight">
                        <h3>Weight:</h3>
                        <input type="number" name="number-12" id="number-12" class="number">
                    </div><!--weight-->
                </li>
                <li class="li-1">
                    <div class="li-title">
                        <h2>Accounting</h2>
                    </div>
                    <div class="tool">
                        <input type="text" name="name" id="name-13">
                    </div><!--tool-->
                    <div class="weight">
                        <h3>Weight:</h3>
                        <input type="number" name="number-13" id="number-13" class="number">
                    </div><!--weight-->
                </li>
                <li class="li-button">
                    <div class="button">
                        <input type="submit" value="Add" id="submit">
                    </div><!--button-->
                </li>
            </form>
        </ul>
        <div id="error">
            <div class="inner-error">
                <h3>Weight must be a number and all inputs must be filled.</h3>
            </div>
            <button class="error-button" onclick="closeError()">Okay</button>
        </div>
    </div><!--content-->
    </body>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.2/angular.min.js"></script>
    <script src="//code.jquery.com/jquery-1.11.3.min.js"></script>
    <script src="//code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">
        google.load("visualization", "1", {packages:["corechart"]});
        google.setOnLoadCallback(drawChart);
        var dataArray = [
            ['TASK', 'Hours per Day'],
            ['PHONE', 1],
            ['EMAIL', 1],
            ['TEXT/SMS', 1],
            ['WEBSITE', 1],
            ['APPLICATIONS', 1],
            ['CONTRACT', 1],
            ['PAYMENTS', 1],
            ['STUDENT LEDGERS/ONLINE', 1],
            ['ACCOUNTS', 1],
            ['ROOMMATE MATCHING', 1],
            ['ROOM ASSIGNMENTS', 1],
            ['MAINTENANCE', 1],
            ['ACCOUNTING', 1]
        ];
        function drawChart() {
            var data = google.visualization.arrayToDataTable(dataArray);
            var options = {
                title: 'Property Management Solutions',
                titleTextStyle: {
                    color: '#595A59',
                    fontSize: 36,
                    bold: false
                },
                pieHole: 0.3,
                fontSize: 24,
                chartArea: {
                    top: 150
                },
                legend: {
                    textStyle: {
                        color: '#595A59',
                        fontSize: 12
                    }
                },
                tooltip: {
                    textStyle: {
                        color: '#595A59'
                    }
                }
            };

            var chart = new google.visualization.PieChart(document.getElementById('donutchart'));
            chart.draw(data, options);
        }

        $( "form" ).submit(function( event ) {
            var slices = $( this ).serializeArray();
            console.log(slices);
            var seen = [];
            for (i = 0; i < slices.length - 1; i += 2) {
                var str = slices[i].value.toUpperCase();
                var l = seen.indexOf(str);
                console.log(l);
                if (l == -1) {
                    seen.push(str, slices[i + 1].value);
                } else {
                    var m = parseInt(slices[i + 1].value);
                    var n = parseInt(seen[l + 1]);
                    var newWeight = m + n;
                    console.log(seen);
                    console.log(newWeight);
                    if (newWeight > 0) {
                        seen.push(str, newWeight);
                        seen.splice(l, 2)
                    } else{
                        document.getElementById("error").style.display = "block";
                    }
                }
            }
            console.log(seen);
            dataArray.splice(1,13);
            for (o = 0; o < (seen.length - 1)/2; o++) {
                var j = o * 2;
                var k = j + 1;
                var tool = [seen[j], parseInt(seen[k])];
                dataArray.push(tool);
            }
            console.log(dataArray);
            drawChart();
            event.preventDefault();
        });

        function closeError() {
            document.getElementById("error").style.display = "none";
        }
    </script>
</html>